import{n as L,t as O,x as D,y as ke,z as pe,p as ue,c as R,d as Y,e as Z,o as de,i as z,w as E,g as V,I as M,f as Pe,h as xe,A as Ie,C as Se,v as Oe,s as $e,u as Le,b as ze,_ as Te}from"./plugin-vueexport-helper-fba48285.js";import{u as J,a as Be,L as Ae}from"./index-459da6a1.js";import{I as ve,a as oe}from"./dataApi-cacffe0c.js";import{E as me,G as De,b as Q,r as S,d as N,a as n,T as X,s as ee,v as te,c as A,n as Ve,o as fe,H as Re,I as Ee,J as ge,F as q,m as he,l as ye,g as be,f as Ne,u as je,e as Me,h as ae,i as T,p as le,j as B,q as Ue,k as W,D as We,t as K}from"./index-a7cc648c.js";import{c as ce}from"./commonUtil-f278a290.js";import{u as Fe}from"./use-id-0d63ccda.js";import{P as Ge,H as ne}from"./on-popup-reopen-31dce3e1.js";import{c as He,r as Ke,u as qe}from"./use-route-b73e6aa8.js";import{u as Ye}from"./use-touch-32e776f2.js";let Ze=2e3;const Je=()=>++Ze,Qe={show:Boolean,zIndex:L,overlay:O,duration:L,teleport:[String,Object],lockScroll:O,lazyRender:O,beforeClose:Function,overlayStyle:Object,overlayClass:D,transitionAppear:Boolean,closeOnClickOverlay:O};let U=0;const se="van-overflow-hidden";function Xe(e,t){const s=Ye(),h="01",a="10",r=v=>{s.move(v);const m=s.deltaY.value>0?a:h,y=pe(v.target,e.value),{scrollHeight:b,offsetHeight:_,scrollTop:w}=y;let c="11";w===0?c=_>=b?"00":"01":w+_>=b&&(c="10"),c!=="11"&&s.isVertical()&&!(parseInt(c,2)&parseInt(m,2))&&ue(v,!0)},l=()=>{document.addEventListener("touchstart",s.start),document.addEventListener("touchmove",r,{passive:!1}),U||document.body.classList.add(se),U++},d=()=>{U&&(document.removeEventListener("touchstart",s.start),document.removeEventListener("touchmove",r),U--,U||document.body.classList.remove(se))},u=()=>t()&&l(),i=()=>t()&&d();ke(u),me(i),De(i),Q(t,v=>{v?l():d()})}function _e(e){const t=S(!1);return Q(e,s=>{s&&(t.value=s)},{immediate:!0}),s=>()=>t.value?s():null}const[et,tt]=R("overlay"),nt={show:Boolean,zIndex:L,duration:L,className:D,lockScroll:O,lazyRender:O,customStyle:Object};var ot=N({name:et,props:nt,setup(e,{slots:t}){const s=S(),h=_e(()=>e.show||!e.lazyRender),a=l=>{e.lockScroll&&ue(l,!0)},r=h(()=>{var l;const d=Z(de(e.zIndex),e.customStyle);return z(e.duration)&&(d.animationDuration=`${e.duration}s`),ee(n("div",{ref:s,style:d,class:[tt(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[te,e.show]])});return Y("touchmove",a,{target:s}),()=>n(X,{name:"van-fade",appear:!0},{default:r})}});const at=E(ot),lt=Z({},Qe,{round:Boolean,position:V("center"),closeIcon:V("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:V("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ct,re]=R("popup");var st=N({name:ct,inheritAttrs:!1,props:lt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:s,slots:h}){let a,r;const l=S(),d=S(),u=_e(()=>e.show||!e.lazyRender),i=A(()=>{const g={zIndex:l.value};if(z(e.duration)){const x=e.position==="center"?"animationDuration":"transitionDuration";g[x]=`${e.duration}s`}return g}),v=()=>{a||(a=!0,l.value=e.zIndex!==void 0?+e.zIndex:Je(),t("open"))},m=()=>{a&&He(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},y=g=>{t("clickOverlay",g),e.closeOnClickOverlay&&m()},b=()=>{if(e.overlay)return n(at,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:y},{default:h["overlay-content"]})},_=g=>{t("clickCloseIcon",g),m()},w=()=>{if(e.closeable)return n(M,{role:"button",tabindex:0,name:e.closeIcon,class:[re("close-icon",e.closeIconPosition),ne],classPrefix:e.iconPrefix,onClick:_},null)};let c;const o=()=>{c&&clearTimeout(c),c=setTimeout(()=>{t("opened")})},f=()=>t("closed"),C=g=>t("keydown",g),P=u(()=>{var g;const{round:x,position:$,safeAreaInsetTop:k,safeAreaInsetBottom:H}=e;return ee(n("div",he({ref:d,style:i.value,role:"dialog",tabindex:0,class:[re({round:x,[$]:$}),{"van-safe-area-top":k,"van-safe-area-bottom":H}],onKeydown:C},s),[(g=h.default)==null?void 0:g.call(h),w()]),[[te,e.show]])}),I=()=>{const{position:g,transition:x,transitionAppear:$}=e,k=g==="center"?"van-fade":`van-popup-slide-${g}`;return n(X,{name:x||k,appear:$,onAfterEnter:o,onAfterLeave:f},{default:P})};return Q(()=>e.show,g=>{g&&!a&&(v(),s.tabindex===0&&Ve(()=>{var x;(x=d.value)==null||x.focus()})),!g&&a&&(a=!1,t("close"))}),J({popupRef:d}),Xe(d,()=>e.show&&e.lockScroll),Y("popstate",()=>{e.closeOnPopstate&&(m(),r=!1)}),fe(()=>{e.show&&v()}),Re(()=>{r&&(t("update:show",!0),r=!1)}),me(()=>{e.show&&e.teleport&&(m(),r=!0)}),Ee(Ge,()=>e.show),()=>e.teleport?n(ge,{to:e.teleport},{default:()=>[b(),I()]}):n(q,null,[b(),I()])}});const rt=E(st),[it,j]=R("cell"),ut={tag:V("div"),icon:String,size:String,title:L,value:L,label:L,center:Boolean,isLink:Boolean,border:O,required:Boolean,iconPrefix:String,valueClass:D,labelClass:D,titleClass:D,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},dt=Z({},ut,Ke);var vt=N({name:it,props:dt,setup(e,{slots:t}){const s=qe(),h=()=>{if(t.label||z(e.label))return n("div",{class:[j("label"),e.labelClass]},[t.label?t.label():e.label])},a=()=>{var u;if(t.title||z(e.title)){const i=(u=t.title)==null?void 0:u.call(t);return Array.isArray(i)&&i.length===0?void 0:n("div",{class:[j("title"),e.titleClass],style:e.titleStyle},[i||n("span",null,[e.title]),h()])}},r=()=>{const u=t.value||t.default;if(u||z(e.value))return n("div",{class:[j("value"),e.valueClass]},[u?u():n("span",null,[e.value])])},l=()=>{if(t.icon)return t.icon();if(e.icon)return n(M,{name:e.icon,class:j("left-icon"),classPrefix:e.iconPrefix},null)},d=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const u=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return n(M,{name:u,class:j("right-icon")},null)}};return()=>{var u;const{tag:i,size:v,center:m,border:y,isLink:b,required:_}=e,w=(u=e.clickable)!=null?u:b,c={center:m,required:_,clickable:w,borderless:!y};return v&&(c[v]=!!v),n(i,{class:j(c),role:w?"button":void 0,tabindex:w?0:void 0,onClick:s},{default:()=>{var o;return[l(),a(),r(),d(),(o=t.extra)==null?void 0:o.call(t)]}})}}});const mt=E(vt),[ft,ie]=R("tag"),gt={size:String,mark:Boolean,show:O,type:V("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var ht=N({name:ft,props:gt,emits:["close"],setup(e,{slots:t,emit:s}){const h=l=>{l.stopPropagation(),s("close",l)},a=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},r=()=>{var l;const{type:d,mark:u,plain:i,round:v,size:m,closeable:y}=e,b={mark:u,plain:i,round:v};m&&(b[m]=m);const _=y&&n(M,{name:"cross",class:[ie("close"),ne],onClick:h},null);return n("span",{style:a(),class:ie([b,d])},[(l=t.default)==null?void 0:l.call(t),_])};return()=>n(X,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?r():null]})}});const yt=E(ht),[bt,p]=R("card"),_t={tag:String,num:L,desc:String,thumb:String,title:String,price:L,centered:Boolean,lazyLoad:Boolean,currency:V("¥"),thumbLink:String,originPrice:L};var Ct=N({name:bt,props:_t,emits:["clickThumb"],setup(e,{slots:t,emit:s}){const h=()=>{if(t.title)return t.title();if(e.title)return n("div",{class:[p("title"),"van-multi-ellipsis--l2"]},[e.title])},a=()=>{if(t.tag||e.tag)return n("div",{class:p("tag")},[t.tag?t.tag():n(yt,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},r=()=>t.thumb?t.thumb():n(ve,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),l=()=>{if(t.thumb||e.thumb)return n("a",{href:e.thumbLink,class:p("thumb"),onClick:i=>s("clickThumb",i)},[r(),a()])},d=()=>{if(t.desc)return t.desc();if(e.desc)return n("div",{class:[p("desc"),"van-ellipsis"]},[e.desc])},u=()=>{const i=e.price.toString().split(".");return n("div",null,[n("span",{class:p("price-currency")},[e.currency]),n("span",{class:p("price-integer")},[i[0]]),ye("."),n("span",{class:p("price-decimal")},[i[1]])])};return()=>{var i,v,m;const y=t.num||z(e.num),b=t.price||z(e.price),_=t["origin-price"]||z(e.originPrice),w=y||b||_||t.bottom,c=b&&n("div",{class:p("price")},[t.price?t.price():u()]),o=_&&n("div",{class:p("origin-price")},[t["origin-price"]?t["origin-price"]():`${e.currency} ${e.originPrice}`]),f=y&&n("div",{class:p("num")},[t.num?t.num():`x${e.num}`]),C=t.footer&&n("div",{class:p("footer")},[t.footer()]),P=w&&n("div",{class:p("bottom")},[(i=t["price-top"])==null?void 0:i.call(t),c,o,f,(v=t.bottom)==null?void 0:v.call(t)]);return n("div",{class:p()},[n("div",{class:p("header")},[l(),n("div",{class:p("content",{centered:e.centered})},[n("div",null,[h(),d(),(m=t.tags)==null?void 0:m.call(t)]),P])]),C])}}});const wt=E(Ct),[Ce,F]=R("dropdown-menu"),kt={overlay:O,zIndex:L,duration:Pe(.2),direction:V("down"),activeColor:String,closeOnClickOutside:O,closeOnClickOverlay:O},we=Symbol(Ce);var pt=N({name:Ce,props:kt,setup(e,{slots:t}){const s=Fe(),h=S(),a=S(),r=S(0),{children:l,linkChildren:d}=xe(we),u=Ie(h),i=A(()=>l.some(o=>o.state.showWrapper)),v=A(()=>{if(i.value&&z(e.zIndex))return{zIndex:+e.zIndex+1}}),m=()=>{l.forEach(o=>{o.toggle(!1)})},y=()=>{e.closeOnClickOutside&&m()},b=()=>{if(a.value){const o=Oe(a);e.direction==="down"?r.value=o.bottom:r.value=$e.value-o.top}},_=()=>{i.value&&b()},w=o=>{l.forEach((f,C)=>{C===o?f.toggle():f.state.showPopup&&f.toggle(!1,{immediate:!0})})},c=(o,f)=>{const{showPopup:C}=o.state,{disabled:P,titleClass:I}=o;return n("div",{id:`${s}-${f}`,role:"button",tabindex:P?void 0:0,class:[F("item",{disabled:P}),{[ne]:!P}],onClick:()=>{P||w(f)}},[n("span",{class:[F("title",{down:C===(e.direction==="down"),active:C}),I],style:{color:C?e.activeColor:""}},[n("div",{class:"van-ellipsis"},[o.renderTitle()])])])};return J({close:m}),d({id:s,props:e,offset:r,updateOffset:b}),Se(h,y),Y("scroll",_,{target:u,passive:!0}),()=>{var o;return n("div",{ref:h,class:F()},[n("div",{ref:a,style:v.value,class:F("bar",{opened:i.value})},[l.map(c)]),(o=t.default)==null?void 0:o.call(t)])}}});const[Pt,G]=R("dropdown-item"),xt={title:String,options:ze(),disabled:Boolean,teleport:[String,Object],lazyRender:O,modelValue:D,titleClass:D};var It=N({name:Pt,inheritAttrs:!1,props:xt,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:s,attrs:h}){const a=be({showPopup:!1,transition:!0,showWrapper:!1}),{parent:r,index:l}=Le(we);if(!r)return;const d=o=>()=>t(o),u=d("open"),i=d("close"),v=d("opened"),m=()=>{a.showWrapper=!1,t("closed")},y=o=>{e.teleport&&o.stopPropagation()},b=(o=!a.showPopup,f={})=>{o!==a.showPopup&&(a.showPopup=o,a.transition=!f.immediate,o&&(r.updateOffset(),a.showWrapper=!0))},_=()=>{if(s.title)return s.title();if(e.title)return e.title;const o=e.options.find(f=>f.value===e.modelValue);return o?o.text:""},w=o=>{const{activeColor:f}=r.props,C=o.value===e.modelValue,P=()=>{a.showPopup=!1,o.value!==e.modelValue&&(t("update:modelValue",o.value),t("change",o.value))},I=()=>{if(C)return n(M,{class:G("icon"),color:f,name:"success"},null)};return n(mt,{role:"menuitem",key:o.value,icon:o.icon,title:o.text,class:G("option",{active:C}),style:{color:C?f:""},tabindex:C?0:-1,clickable:!0,onClick:P},{value:I})},c=()=>{const{offset:o}=r,{zIndex:f,overlay:C,duration:P,direction:I,closeOnClickOverlay:g}=r.props,x=de(f);return I==="down"?x.top=`${o.value}px`:x.bottom=`${o.value}px`,ee(n("div",he({style:x,class:G([I]),onClick:y},h),[n(rt,{show:a.showPopup,"onUpdate:show":$=>a.showPopup=$,role:"menu",class:G("content"),overlay:C,position:I==="down"?"top":"bottom",duration:a.transition?P:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${r.id}-${l.value}`,closeOnClickOverlay:g,onOpen:u,onClose:i,onOpened:v,onClosed:m},{default:()=>{var $;return[e.options.map(w),($=s.default)==null?void 0:$.call(s)]}})]),[[te,a.showWrapper]])};return J({state:a,toggle:b,renderTitle:_}),()=>e.teleport?n(ge,{to:e.teleport},{default:()=>[c()]}):c()}});const St=E(It),Ot=E(pt);const $t={class:"learn-header"},Lt={class:"learn-container"},zt={class:"title"},Tt={class:"title-content"},Bt={class:"desc-container"},At={class:"desc-content"},Dt={class:"duration"},Vt={__name:"Learn",setup(e){const t=Ne();je();const s=Me(),h=A({get(){return t.getters["common/getActivePage"]},set(c){t.dispatch("common/asyncUpdateActivePage",c)}}),a=A({get(){return t.getters["common/getCurrentVideo"]},set(c){t.dispatch("common/asyncCurrentVideo",c)}}),r=A({get(){return t.getters["common/getGrade"]},set(c){t.dispatch("common/asyncGrade",c)}}),l=A({get(){return t.getters["common/getSubject"]},set(c){t.dispatch("common/asyncSubject",c)}}),d=S(""),u=S(!1),i=S(!1),v=S(!1),m=S(""),y=be({courseMsg:{},selection:{}}),b=()=>{l.value="chinese",_()},_=()=>{m.value=ce.getAssetsFile(r.value+"-"+l.value+".json"),oe(m.value).then(c=>{y.courseMsg=c,i.value=!1,v.value=!0})},w=c=>{a.value=y.courseMsg,s.push({path:"/course",query:{episode_num:c+1}})};return fe(()=>{h.value="learn",d.value=ce.getAssetsFile("learn-selection.json"),oe(d.value).then(c=>{y.selection=c,u.value=!0})}),(c,o)=>{const f=St,C=Ot,P=Ae,I=ve,g=M,x=wt,$=Be;return W(),ae(q,null,[T("div",$t,[u.value?(W(),le(C,{key:0},{default:B(()=>[n(f,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=k=>r.value=k),options:y.selection.grade,onChange:b},null,8,["modelValue","options"]),n(f,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=k=>l.value=k),options:y.selection.subject[r.value],onChange:_},null,8,["modelValue","options"])]),_:1})):Ue("",!0)]),T("div",Lt,[n($,{loading:i.value,"onUpdate:loading":o[2]||(o[2]=k=>i.value=k),finished:v.value,"finished-text":"没有更多了",onLoad:_},{default:B(()=>[(W(!0),ae(q,null,We(y.courseMsg.episode,(k,H)=>(W(),le(x,{thumb:k.img,onClick:Rt=>w(H)},{thumb:B(()=>[n(I,{class:"learn-img",src:k.img},{loading:B(()=>[n(P,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),title:B(()=>[T("div",zt,[T("span",Tt,[n(g,{color:"#1989fa",name:"video-o"}),ye(K(k.title),1)])])]),desc:B(()=>[T("div",Bt,[T("p",At,K(k.desc),1)])]),price:B(()=>[T("div",Dt,[n(g,{name:"clock-o"}),T("span",null,K(k.duration),1)])]),_:2},1032,["thumb","onClick"]))),256))]),_:1},8,["loading","finished"])])],64)}}},Kt=Te(Vt,[["__scopeId","data-v-9c7f6f27"]]);export{Kt as default};
