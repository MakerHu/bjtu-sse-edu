import{D as he,E as q,F as me,G as Oe,H as He,y as ge,c as D,n as P,g as be,f as N,A as ye,j as xe,e as we,o as De,d as Te,J,v as z,r as Se,s as Me,w as ee,m as G,t as K,h as Fe,K as se,i as Q,L as We,M as re,B as Ue,x as Ze,u as Ve,N as je,l as ce,_ as Ke}from"./plugin-vueexport-helper-fba48285.js";/* empty css              *//* empty css              */import{r as C,K as Ge,E as Xe,G as Ye,d as M,g as te,c as _,b as B,n as A,a as b,o as _e,H as qe,w as Je,L as Qe,M as et,N as tt,I as nt,s as at,v as ot,m as it,C as lt,f as st,u as rt,e as ct,p as de,j as ue,k as X,h as dt,D as ut,F as ft,i as vt}from"./index-a7cc648c.js";import{C as ht}from"./CardsList-26d109d4.js";import{u as Ce}from"./use-id-0d63ccda.js";import{c as mt,a as gt,r as bt}from"./use-route-b73e6aa8.js";import{u as ne,T as yt}from"./index-459da6a1.js";import{o as xt,a as wt}from"./on-popup-reopen-31dce3e1.js";import{S as Tt,a as St}from"./index-30ce49dd.js";import"./dataApi-cacffe0c.js";import"./commonUtil-f278a290.js";import"./use-touch-32e776f2.js";function _t(e,a,i){let o,r=0;const t=e.scrollLeft,l=i===0?1:Math.round(i*1e3/16);function c(){he(o)}function u(){e.scrollLeft+=(a-t)/l,++r<l&&(o=q(u))}return u(),c}function Ct(e,a,i,o){let r,t=me(e);const l=t<a,c=i===0?1:Math.round(i*1e3/16),u=(a-t)/c;function g(){he(r)}function y(){t+=u,(l&&t>a||!l&&t<a)&&(t=a),Oe(e,t),l&&t<a||!l&&t>a?r=q(y):o&&(r=q(o))}return y(),g}function kt(){const e=C([]),a=[];return Ge(()=>{e.value=[]}),[e,o=>(a[o]||(a[o]=r=>{e.value[o]=r}),a[o])]}function ke(e,a){if(!He||!window.IntersectionObserver)return;const i=new IntersectionObserver(t=>{a(t[0].intersectionRatio>0)},{root:document.body}),o=()=>{e.value&&i.observe(e.value)},r=()=>{e.value&&i.unobserve(e.value)};Xe(r),Ye(r),ge(o)}const[Rt,It]=D("sticky"),Bt={zIndex:P,position:be("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var pt=M({name:Rt,props:Bt,emits:["scroll","change"],setup(e,{emit:a,slots:i}){const o=C(),r=ye(o),t=te({fixed:!1,width:0,height:0,transform:0}),l=C(!1),c=_(()=>xe(e.position==="top"?e.offsetTop:e.offsetBottom)),u=_(()=>{if(l.value)return;const{fixed:v,height:S,width:f}=t;if(v)return{width:`${f}px`,height:`${S}px`}}),g=_(()=>{if(!t.fixed||l.value)return;const v=we(De(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${c.value}px`});return t.transform&&(v.transform=`translate3d(0, ${t.transform}px, 0)`),v}),y=v=>a("scroll",{scrollTop:v,isFixed:t.fixed}),R=()=>{if(!o.value||J(o))return;const{container:v,position:S}=e,f=z(o),T=me(window);if(t.width=f.width,t.height=f.height,S==="top")if(v){const d=z(v),I=d.bottom-c.value-t.height;t.fixed=c.value>f.top&&d.bottom>0,t.transform=I<0?I:0}else t.fixed=c.value>f.top;else{const{clientHeight:d}=document.documentElement;if(v){const I=z(v),m=d-I.top-c.value-t.height;t.fixed=d-c.value<f.bottom&&d>I.top,t.transform=m<0?-m:0}else t.fixed=d-c.value<f.bottom}y(T)};return B(()=>t.fixed,v=>a("change",v)),Te("scroll",R,{target:r,passive:!0}),ke(o,R),B([Se,Me],()=>{!o.value||J(o)||!t.fixed||(l.value=!0,A(()=>{const v=z(o);t.width=v.width,t.height=v.height,l.value=!1}))}),()=>{var v;return b("div",{ref:o,style:u.value},[b("div",{class:It({fixed:t.fixed&&!l.value}),style:g.value},[(v=i.default)==null?void 0:v.call(i)])])}}});const $t=ee(pt),[At,fe]=D("tabs");var Pt=M({name:At,props:{count:G(Number),inited:Boolean,animated:Boolean,duration:G(P),swipeable:Boolean,lazyRender:Boolean,currentIndex:G(Number)},emits:["change"],setup(e,{emit:a,slots:i}){const o=C(),r=c=>a("change",c),t=()=>{var c;const u=(c=i.default)==null?void 0:c.call(i);return e.animated||e.swipeable?b(Tt,{ref:o,loop:!1,class:fe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:r},{default:()=>[u]}):u},l=c=>{const u=o.value;u&&u.state.active!==c&&u.swipeTo(c,{immediate:!e.inited})};return B(()=>e.currentIndex,l),_e(()=>{l(e.currentIndex)}),ne({swipeRef:o}),()=>b("div",{class:fe("content",{animated:e.animated||e.swipeable})},[t()])}});const[Re,j]=D("tabs"),Et={type:be("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:K,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:K,lineWidth:P,lineHeight:P,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},Ie=Symbol(Re);var Nt=M({name:Re,props:Et,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:a,slots:i}){let o,r,t,l,c;const u=C(),g=C(),y=C(),R=C(),v=Ce(),S=ye(u),[f,T]=kt(),{children:d,linkChildren:I}=Fe(Ie),m=te({inited:!1,position:"",lineStyle:{},currentIndex:-1}),L=_(()=>d.length>+e.swipeThreshold||!e.ellipsis||e.shrink),F=_(()=>({borderColor:e.color,background:e.background})),O=(n,s)=>{var h;return(h=n.name)!=null?h:s},W=_(()=>{const n=d[m.currentIndex];if(n)return O(n,m.currentIndex)}),E=_(()=>xe(e.offsetTop)),ae=_(()=>e.sticky?E.value+o:0),H=n=>{const s=g.value,h=f.value;if(!L.value||!s||!h||!h[m.currentIndex])return;const w=h[m.currentIndex].$el,x=w.offsetLeft-(s.offsetWidth-w.offsetWidth)/2;l&&l(),l=_t(s,x,n?0:+e.duration)},p=()=>{const n=m.inited;A(()=>{const s=f.value;if(!s||!s[m.currentIndex]||e.type!=="line"||J(u.value))return;const h=s[m.currentIndex].$el,{lineWidth:w,lineHeight:x}=e,k=h.offsetLeft+h.offsetWidth/2,$={width:se(w),backgroundColor:e.color,transform:`translateX(${k}px) translateX(-50%)`};if(n&&($.transitionDuration=`${e.duration}s`),Q(x)){const V=se(x);$.height=V,$.borderRadius=V}m.lineStyle=$})},Be=n=>{const s=n<m.currentIndex?-1:1;for(;n>=0&&n<d.length;){if(!d[n].disabled)return n;n+=s}},U=(n,s)=>{const h=Be(n);if(!Q(h))return;const w=d[h],x=O(w,h),k=m.currentIndex!==null;m.currentIndex!==h&&(m.currentIndex=h,s||H(),p()),x!==e.active&&(a("update:active",x),k&&a("change",x,w.title)),t&&!e.scrollspy&&We(Math.ceil(re(u.value)-E.value))},Z=(n,s)=>{const h=d.find((x,k)=>O(x,k)===n),w=h?d.indexOf(h):0;U(w,s)},oe=(n=!1)=>{if(e.scrollspy){const s=d[m.currentIndex].$el;if(s&&S.value){const h=re(s,S.value)-ae.value;r=!0,c&&c(),c=Ct(S.value,h,n?0:+e.duration,()=>{r=!1})}}},pe=(n,s,h)=>{const{title:w,disabled:x}=d[s],k=O(d[s],s);x||(mt(e.beforeChange,{args:[k],done:()=>{U(s),oe()}}),gt(n)),a("clickTab",{name:k,title:w,event:h,disabled:x})},$e=n=>{t=n.isFixed,a("scroll",n)},Ae=n=>{A(()=>{Z(n),oe(!0)})},Pe=()=>{for(let n=0;n<d.length;n++){const{top:s}=z(d[n].$el);if(s>ae.value)return n===0?0:n-1}return d.length-1},Ee=()=>{if(e.scrollspy&&!r){const n=Pe();U(n)}},Ne=()=>{if(e.type==="line"&&d.length)return b("div",{class:j("line"),style:m.lineStyle},null)},ie=()=>{var n,s,h;const{type:w,border:x,sticky:k}=e,$=[b("div",{ref:k?void 0:y,class:[j("wrap"),{[wt]:w==="line"&&x}]},[b("div",{ref:g,role:"tablist",class:j("nav",[w,{shrink:e.shrink,complete:L.value}]),style:F.value,"aria-orientation":"horizontal"},[(n=i["nav-left"])==null?void 0:n.call(i),d.map(V=>V.renderTitle(pe)),Ne(),(s=i["nav-right"])==null?void 0:s.call(i)])]),(h=i["nav-bottom"])==null?void 0:h.call(i)];return k?b("div",{ref:y},[$]):$},le=()=>{p(),A(()=>{var n,s;H(!0),(s=(n=R.value)==null?void 0:n.swipeRef.value)==null||s.resize()})};B(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],p),B(Se,le),B(()=>e.active,n=>{n!==W.value&&Z(n)}),B(()=>d.length,()=>{m.inited&&(Z(e.active),p(),A(()=>{H(!0)}))});const ze=()=>{Z(e.active,!0),A(()=>{m.inited=!0,y.value&&(o=z(y.value).height),H(!0)})},Le=(n,s)=>a("rendered",n,s);return ne({resize:le,scrollTo:Ae}),qe(p),xt(p),ge(ze),ke(u,p),Te("scroll",Ee,{target:S,passive:!0}),I({id:v,props:e,setLine:p,scrollable:L,onRendered:Le,currentName:W,setTitleRefs:T,scrollIntoView:H}),()=>b("div",{ref:u,class:j([e.type])},[e.sticky?b($t,{container:u.value,offsetTop:E.value,onScroll:$e},{default:()=>[ie()]}):ie(),b(Pt,{ref:R,count:d.length,inited:m.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:m.currentIndex,onChange:U},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}});const[zt,ve]=D("tab"),Lt=M({name:zt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:P,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:K},setup(e,{slots:a}){const i=_(()=>{const r={},{type:t,color:l,disabled:c,isActive:u,activeColor:g,inactiveColor:y}=e;l&&t==="card"&&(r.borderColor=l,c||(u?r.backgroundColor=l:r.color=l));const v=u?g:y;return v&&(r.color=v),r}),o=()=>{const r=b("span",{class:ve("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||Q(e.badge)&&e.badge!==""?b(Ue,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[r]}):r};return()=>b("div",{id:e.id,role:"tab",class:[ve([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[o()])}}),[Ot,Y]=D("tab"),Ht=we({},bt,{dot:Boolean,name:P,badge:P,title:String,disabled:Boolean,titleClass:Ze,titleStyle:[String,Object],showZeroBadge:K});var Dt=M({name:Ot,props:Ht,setup(e,{slots:a}){const i=Ce(),o=C(!1),r=lt(),{parent:t,index:l}=Ve(Ie);if(!t)return;const c=()=>{var f;return(f=e.name)!=null?f:l.value},u=()=>{o.value=!0,t.props.lazyRender&&A(()=>{t.onRendered(c(),e.title)})},g=_(()=>{const f=c()===t.currentName.value;return f&&!o.value&&u(),f}),y=C(""),R=C("");Je(()=>{const{titleClass:f,titleStyle:T}=e;y.value=f?Qe(f):"",R.value=T&&typeof T!="string"?et(tt(T)):T});const v=f=>b(Lt,it({key:i,id:`${t.id}-${l.value}`,ref:t.setTitleRefs(l.value),style:R.value,class:y.value,isActive:g.value,controls:i,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:T=>f(r.proxy,l.value,T)},ce(t.props,["type","color","shrink"]),ce(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title}),S=C(!g.value);return B(g,f=>{f?S.value=!1:je(()=>{S.value=!0})}),B(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),nt(yt,g),ne({id:i,renderTitle:v}),()=>{var f;const T=`${t.id}-${l.value}`,{animated:d,swipeable:I,scrollspy:m,lazyRender:L}=t.props;if(!a.default&&!d)return;const F=m||g.value;if(d||I)return b(St,{id:i,role:"tabpanel",class:Y("panel-wrapper",{inactive:S.value}),tabindex:g.value?0:-1,"aria-hidden":!g.value,"aria-labelledby":T},{default:()=>{var E;return[b("div",{class:Y("panel")},[(E=a.default)==null?void 0:E.call(a)])]}});const W=o.value||m||!L?(f=a.default)==null?void 0:f.call(a):null;return at(b("div",{id:i,role:"tabpanel",class:Y("panel"),tabindex:F?0:-1,"aria-labelledby":T},[W]),[[ot,F]])}}});const Mt=ee(Dt),Ft=ee(Nt);const Wt={class:"expand-container"},Ut={__name:"Expand",setup(e){const a=st();rt(),ct();const i=_({get(){return a.getters["common/getActivePage"]},set(t){a.dispatch("common/asyncUpdateActivePage",t)}}),o=_({get(){return a.getters["common/getExpandActiveTag"]},set(t){a.dispatch("common/asyncExpandActiveTag",t)}}),r=te([{tag:"documentary",tagName:"纪录片",content:"纪录片内容"},{tag:"knowledge",tagName:"趣味知识",content:"趣味知识内容"}]);return _e(()=>{i.value="expand"}),(t,l)=>{const c=Mt,u=Ft;return X(),de(u,{active:o.value,"onUpdate:active":l[0]||(l[0]=g=>o.value=g)},{default:ue(()=>[(X(!0),dt(ft,null,ut(r,(g,y)=>(X(),de(c,{title:g.tagName,name:g.tag},{default:ue(()=>[vt("div",Wt,[b(ht,{dataSource:"expand-"+g.tag},null,8,["dataSource"])])]),_:2},1032,["title","name"]))),256))]),_:1},8,["active"])}}},an=Ke(Ut,[["__scopeId","data-v-7a935ab7"]]);export{an as default};
