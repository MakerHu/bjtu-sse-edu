import{e as y,c as C,R as I,n as S,g as P,K as L,w as k,f as R,t as A,A as $,d as N,v as T,J as U}from"./plugin-vueexport-helper-fba48285.js";import{C as K,a,d as B,c as j,O as D,r as v,b,Q as F,o as H,n as J}from"./index-a7cc648c.js";function M(e){const t=K();t&&y(t.proxy,e)}const[O,g]=C("loading"),Q=Array(12).fill(null).map((e,t)=>a("i",{class:g("line",String(t+1))},null)),V=a("svg",{class:g("circular"),viewBox:"25 25 50 50"},[a("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Y={size:S,type:P("circular"),color:String,vertical:Boolean,textSize:S,textColor:String};var q=B({name:O,props:Y,setup(e,{slots:t}){const i=j(()=>y({color:e.color},I(e.size))),o=()=>{const r=e.type==="spinner"?Q:V;return a("span",{class:g("spinner",e.type),style:i.value},[t.icon?t.icon():r])},u=()=>{var r;if(t.default)return a("span",{class:g("text"),style:{fontSize:L(e.textSize),color:(r=e.textColor)!=null?r:e.color}},[t.default()])};return()=>{const{type:r,vertical:l}=e;return a("div",{class:g([r,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[o(),u()])}}});const G=k(q),W=Symbol(),X=()=>D(W,null),[Z,d,p]=C("list"),ee={error:Boolean,offset:R(300),loading:Boolean,disabled:Boolean,finished:Boolean,errorText:String,direction:P("down"),loadingText:String,finishedText:String,immediateCheck:A};var te=B({name:Z,props:ee,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:i}){const o=v(e.loading),u=v(),r=v(),l=X(),h=$(u),c=()=>{J(()=>{if(o.value||e.finished||e.disabled||e.error||(l==null?void 0:l.value)===!1)return;const{direction:n}=e,f=+e.offset,s=T(h);if(!s.height||U(u))return;let x=!1;const m=T(r);n==="up"?x=s.top-m.top<=f:x=m.bottom-s.bottom<=f,x&&(o.value=!0,t("update:loading",!0),t("load"))})},_=()=>{if(e.finished){const n=i.finished?i.finished():e.finishedText;if(n)return a("div",{class:d("finished-text")},[n])}},w=()=>{t("update:error",!1),c()},z=()=>{if(e.error){const n=i.error?i.error():e.errorText;if(n)return a("div",{role:"button",class:d("error-text"),tabindex:0,onClick:w},[n])}},E=()=>{if(o.value&&!e.finished&&!e.disabled)return a("div",{class:d("loading")},[i.loading?i.loading():a(G,{class:d("loading-icon")},{default:()=>[e.loadingText||p("loading")]})])};return b(()=>[e.loading,e.finished,e.error],c),l&&b(l,n=>{n&&c()}),F(()=>{o.value=e.loading}),H(()=>{e.immediateCheck&&c()}),M({check:c}),N("scroll",c,{target:h,passive:!0}),()=>{var n;const f=(n=i.default)==null?void 0:n.call(i),s=a("div",{ref:r,class:d("placeholder")},null);return a("div",{ref:u,role:"feed",class:d(),"aria-busy":o.value},[e.direction==="down"?f:s,E(),_(),z(),e.direction==="up"?f:s])}}});const ie=k(te);export{G as L,W as T,ie as a,M as u};
